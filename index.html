<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>Project Aqua</title>
    <link rel="stylesheet" type="text/css" href="./style/style.css" charset="utf-8"/>
</head>
<body>
<div class="Main">
    <div class="Title">
        <table style="display: inline-block; border-collapse: collapse; border-spacing: 0;">
            <tr>
                <td><img src="./documentation/logo.png" width="150"></td>
                <td style="font-size: 18px; font-weight: bold; color:#ccc;"> / MP3 Encoder</td>
            </tr>
        </table>

        <div style="float: right; right: 0; margin-top: 18px;">
            <a style="border-bottom: none;" href="https://github.com/mikukonai/Aqua"><img alt="GitHub stars" src="https://img.shields.io/github/stars/mikukonai/Aqua?style=social"></a>
        </div>
    </div>

    <!-- <div class="TitleBorder"></div> -->

    <div class="Block">

        <div class="InputButton" id="inputButton">
            <canvas id="osc" class="Osc" height="240" width="1152"></canvas>
            <input type="file" id="fileSelector" name="files" multiple class="Input">
            <div id="inputButtonLabel" class="InputButtonLabel">
                <div style="line-height: 0px; margin-top: 22px;">
                    <svg t="1590511838623" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="23587" width="30" height="30"><path d="M777.846 119.65l-422.479 80.896c-22.016 4.333-37.809 23.592-37.77 45.923v449.339c-33.83-13.588-78.06-13.706-121.068 2.836-73.925 28.435-116.066 95.271-94.168 149.267 21.897 53.957 99.564 74.713 173.45 46.277 62.345-24.024 102.124-75.303 99.879-123.195V360.212l371.712-71.208V602.9c-33.792-13.627-78.14-13.785-121.147 2.796-73.886 28.475-115.988 95.31-94.13 149.268 21.898 53.957 99.486 74.712 173.332 46.277 61.204-23.592 100.628-73.531 99.88-120.675h0.157V142.572a23.237 23.237 0 0 0-27.57-22.922z" fill="#bbbbbb" p-id="23588"></path></svg>
                </div>
                <div style="line-height: 30px;">选择输入文件...</div>
            </div>
        </div>

        <div style="text-align: left; margin: 20px 0;">
            <div style="height: 20px;">
                <span id="timer" class="Timer" style="float: left;"></span>
                <span id="speed" class="Timer" style="float: right;"></span>
            </div>
            <div id="play" class="PlayButton" data-state="stopped" disabled="disabled">
                <span id="playButtonLabel" style="padding: 0 10px;">开始编码</span>
                <div id="progressbar" style="height: 100%; background-color: #66ccff; width: 0px;"></div>
            </div>
            
        </div>

    </div>

    <footer class="Footer">
        <div class="Copyright">&copy; 2019-2020 Mikukonai</div>
    </footer>

</div>

<script src="./script/jquery.min.js"></script>
<script src="./script/canvas.js"></script>
<script src="./script/filesaver.js"></script>

<!--以下按照各个模块之间依赖关系的拓扑排序排列-->

<script src="common.js"></script>

<script src="fft.js"></script>
<script src="psy.js"></script>
<script src="subband_filter.js"></script>
<script src="huffman.js"></script>
<script src="mdct.js"></script>
<script src="reservoir.js"></script>
<script src="qloop.js"></script>
<script src="stream.js"></script>

<script src="decoder.js"></script>

<script src="main.js"></script>

<script src="shell.js"></script>

<script>
/*
let spect = [108,106,102,96,89,79,69,56,41,25,5,-16,-25,-29,-27,-18,5,19,-37,-39,-37,-31,-24,-17,-11,-5,3,8,13,16,18,19,17,12,1,-9,18,18,15,9,1,-7,-10,-11,-12,-13,-13,-14,-15,-16,-16,-14,-9,-3,-5,-7,-5,1,6,10,14,18,23,28,32,35,38,37,34,26,13,-6,23,27,26,22,17,13,11,9,7,6,4,3,1,0,0,4,8,10,-17,-17,-16,-14,-12,-10,-8,-6,-4,-1,3,6,8,9,10,9,5,0,5,6,3,-2,-5,-7,-8,-8,-8,-8,-7,-7,-6,-5,-3,-1,3,4,-8,-8,-8,-8,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,4,-5,-5,-5,-5,-5,-4,-4,-4,-3,-3,-2,-2,-2,-2,-3,-3,-3,-2,3,4,5,7,8,9,10,11,11,11,11,11,10,9,7,5,2,-2,5,6,6,6,5,4,3,2,1,-1,-2,-3,-3,-4,-3,-3,-2,0,-2,-2,-3,-3,-3,-3,-3,-2,-2,-2,-1,0,0,1,2,2,2,2,-2,-2,-2,-2,-2,-1,-1,0,0,1,2,2,2,3,3,2,2,1,0,0,0,0,-1,-1,-1,-2,-2,-3,-3,-3,-3,-4,-4,-4,-3,-3,3,2,2,2,2,2,2,2,1,0,0,-1,-1,-1,-1,-1,-1,-1,1,0,0,0,0,-1,0,0,0,1,1,1,2,2,2,2,2,2,-3,-2,-2,-2,-2,-2,-1,-1,0,1,2,2,3,3,3,2,1,-1,3,3,3,2,2,1,0,-1,-2,-3,-3,-4,-4,-5,-5,-4,-3,-2,1,0,0,1,2,2,2,1,0,-1,-2,-2,-3,-3,-3,-2,-1,0,-2,-2,-2,-2,-1,0,0,1,1,2,2,2,2,2,2,2,2,1,-1,-1,-1,-2,-2,-3,-3,-2,-2,-2,-1,-1,0,1,1,1,1,0,1,1,0,-1,-1,-2,-2,-2,-2,-3,-3,-3,-3,-2,-2,-1,0,1,-2,-2,-2,-2,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,0,1,-2,-2,-1,-1,0,1,1,2,2,2,3,3,3,3,2,2,1,0,1,1,1,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,-1,1,1,1,1,1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,1,1,1,0,0,0,0,-1,-1,-1,-1,-1,-1,0,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,1,1,1,1,1,1,1,1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,1,0,1,1,1,1,1,1,0,0,0,-1,-1,-1,-1,-1,0,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,1,1,1,1,1,1,1,0];

LOG(`===== 编码前 =====`);
LOG(spect);

let huffman = HuffmanEncode(spect, WINDOW_START);
LOG(`===== 编码结果 =====`);
LOG(huffman);

let spectDecoded = HuffmanDecode(
    huffman.codeString,
    huffman.blockType,
    huffman.bigvalues,
    huffman.region0Count,
    huffman.region1Count,
    huffman.bigvalueTableSelect,
    huffman.smallvalueTableSelect
);
LOG(`===== 解码后 =====`);
LOG(spectDecoded);

LOG(`===== 结果校验 =====`);
let ispass = true;
for(let i = 0; i < 576; i++) {
    if(spect[i] !== spectDecoded[i]) {
        ispass = false;
        console.error(`编/解码错误`);
    }
}
if(ispass) { LOG(`编解码结果正确`); }
*/
</script>

</body>
</html>
